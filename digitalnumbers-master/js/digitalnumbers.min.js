/* https://github.com/andysellick/digitalnumbers */
Date.now||(Date.now=function(){return(new Date).getTime()}),function(t,e){var n=function(t,n){this.elem=t,this.$elem=e(t),this.options=n};n.prototype={init:function(){var n=this;n.timer=0,n.numCurr=0,n.numLen=0,n.dateorder=["year","month","day","hour","minute","second"],this.settings=e.extend({numMax:100,numMin:0,startat:0,increment:1,dateTarget:[2020,2,23,14,25,0],delay:500,speed:500,direction:1,mode:"scale"},this.defaults,this.options);var i={general:{init:function(){"clock"===n.settings.mode?(n.$elem.addClass("clock"),n.numLen=6,n.numCurr=i.utility.getCurrentTime(),i.markup.createDigits(),n.timer=setTimeout(i.general.clock,500)):"countdown"===n.settings.mode?(n.$elem.addClass("clock"),n.targ=n.settings.dateTarget,n.targ=new Date(n.targ[0],n.targ[1]-1,n.targ[2],n.targ[3],n.targ[4],n.targ[5]),n.timeobj={year:"00",month:"00",day:"00",hour:"00",minute:"00",second:"00"},n.numLen=2*Object.keys(n.timeobj).length,i.markup.createDigits(),i.general.countDown()):(n.numLen=i.utility.getNumberStrLen(n.settings.numMax),n.numCurr=n.settings.startat,i.markup.createDigits(),"scaleloop"===n.settings.mode?n.timer=setTimeout(i.general.scaleNumberLoop,n.settings.delay):"scale"===n.settings.mode&&(n.timer=setTimeout(i.general.scaleNumber,n.settings.delay)))},overrideSettings:function(){if(n.settings.numMin=Math.max(n.settings.numMin,0),n.settings.numMax=Math.max(n.settings.numMax,0),n.settings.numCurr=Math.max(n.settings.numCurr,0),n.settings.increment=Math.min(n.settings.increment,1),n.settings.startat=Math.max(0,Math.min(n.settings.startat,n.settings.numMax)),n.settings.direction<0?n.settings.direction=-1:n.settings.direction=1,"countdown"===n.settings.mode){var t=[2016,2,23,14,25,0];6!==n.settings.dateTarget.length&&(n.settings.dateTarget=t)}},countDown:function(){n.now=new Date;var t=moment.preciseDiff(n.now,n.targ);t=t.split(" "),n.timeobj={year:"00",month:"00",day:"00",hour:"00",minute:"00",second:"00"};for(var e=0;e<t.length;e+=2){var r=t[e],s=t[e+1];"s"==s[s.length-1]&&(s=s.substring(0,s.length-1)),n.timeobj[s]=r}var a="";for(var u in n.dateorder){var u=n.dateorder[u];a+=i.utility.padDigits(n.timeobj[u],2)}n.numCurr=parseInt(a),i.markup.updateDigits(),n.timer=setTimeout(i.general.countDown,100)},scaleNumber:function(){n.numCurr+=n.settings.direction,i.markup.updateDigits(),1===n.settings.direction?n.numCurr<n.settings.numMax&&(n.timer=setTimeout(i.general.scaleNumber,n.settings.speed)):n.numCurr>n.settings.numMin&&(n.timer=setTimeout(i.general.scaleNumber,n.settings.speed))},clock:function(){n.numCurr=i.utility.getCurrentTime(),i.markup.updateDigits(),n.timer=setTimeout(i.general.clock,500)},scaleNumberLoop:function(){n.numCurr+=n.settings.direction,n.numCurr===n.settings.numMax?n.settings.direction=-1:n.numCurr===n.settings.numMin&&(n.settings.direction=1),i.markup.updateDigits(),n.timer=setTimeout(i.general.scaleNumberLoop,n.settings.speed)},resizeWindow:function(){}},utility:{getCurrentTime:function(){var t=new Date,e=i.utility.padDigits(t.getHours(),2),n=i.utility.padDigits(t.getMinutes(),2),r=i.utility.padDigits(t.getSeconds(),2);return parseInt(""+e+n+r)},getNumberStrLen:function(t){var e=""+t;return e.length},padDigits:function(t,e){return Array(Math.max(e-String(t).length+1,0)).join(0)+t}},events:{initClicks:function(){}},markup:{createDigits:function(){for(var t=""+i.utility.padDigits(n.numCurr,n.numLen),r=0;r<n.numLen;r++){for(var s=e("<div/>").addClass("digit num"+t[r]),a=1;8>a;a++){e("<div/>").addClass("bar bar"+a).appendTo(s)}s.appendTo(n.$elem)}},updateDigits:function(){var t=""+i.utility.padDigits(n.numCurr,n.numLen),r=0;n.$elem.find(".digit").each(function(){e(this).attr("class","digit num"+t[r]),r++})}}};e(t).on("load",function(){i.general.overrideSettings(),i.general.init()})}},e.fn.digitalnumbers=function(t){return this.each(function(){new n(this,t).init()})},t.Plugin=n}(window,jQuery);