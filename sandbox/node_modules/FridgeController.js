//Fridge Controller Object
var pin = 17;

var state = {
	FRIDGE_ON : 6,
	FRIDGE_OFF : 7
};

function FridgeController(id) 
{
	this.fridgeId = id;
	this.state = state.FRIDGE_OFF;
	this.Gpio = require('onoff').Gpio;
	this.led = new this.Gpio(pin, 'out');
}

FridgeController.prototype.tester = function() 
{
	//console.log("FridgeController Test!!");
}

FridgeController.prototype.changeState = function(newState) 
{
	//console.log("current state = " + this.state);
	//console.log("request state to = " + newState);
	
	if(newState != this.state)
	{
		this.state = newState;
		//console.log("FridgeController: " + this.fridgeId + " is changed state to : " + this.state);
		if(this.state == state.FRIDGE_ON)
		{
			this.turnOn();
		}
		else
		{
			this.turnOff();
		}
	}
};

FridgeController.prototype.turnOn = function()
{
	this.led.writeSync(1);
};

FridgeController.prototype.turnOff = function()
{
	this.led.writeSync(0);
};

FridgeController.prototype.freeLED = function()
{
	this.led.writeSync(0);
	this.led.unexport();
};


module.exports = FridgeController;